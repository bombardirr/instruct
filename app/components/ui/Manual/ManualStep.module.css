@import "tailwindcss";

.scrollable {
    scrollbar-width: thin;
    scrollbar-color: var(--ag-green-primary) color-mix(in srgb, var(--ag-gray-primary) 20%, transparent);

    &::-webkit-scrollbar {
        @apply w-2 h-2;
    }

    &::-webkit-scrollbar-track {
        @apply bg-[var(--ag-gray-primary)];
        @apply rounded-md;
    }

    &::-webkit-scrollbar-thumb {
        @apply bg-[var(--ag-green-primary)];
        @apply rounded-md;
        @apply transition-all duration-200;
    }

    &::-webkit-scrollbar-thumb:hover {
        @apply bg-[var(--ag-green-light)];
    }
}

.step {
    @apply w-[30%] min-w-[367px] h-[30vh];
    @apply rounded-lg;
    @apply overflow-auto;
    background-color: color-mix(in srgb, var(--ag-gray-primary) 20%, transparent);

    & .step__header {
        @apply flex items-center gap-4;
        @apply p-4;
    }

    & .step__number {
        @apply relative;
        @apply flex items-center justify-center;
        @apply w-12 h-12;
        @apply text-lg font-bold text-[var(--ag-white-primary)];
        @apply cursor-pointer;

        &::before {
            content: attr(data-number);
            @apply absolute inset-0;
            @apply flex items-center justify-center;
            @apply text-lg font-bold text-[var(--ag-white-primary)];
            @apply opacity-0 transition-opacity duration-300;
            text-shadow: 0 0 8px #4a9eff,
                        0 0 16px #4a9eff,
                        0 0 24px #4a9eff,
                        0 0 32px #4a9eff,
                        0 0 48px #4a9eff,
                        0 0 64px #4a9eff;
            animation: glow-pulse 0.8s ease-in-out infinite alternate;
        }
    }

    &:hover .step__number::before {
        @apply opacity-100;
    }

    & .step__title {
        @apply text-xl font-bold text-[var(--ag-white-primary)] uppercase tracking-wider;
    }

    & .step__body {
        @apply p-6 space-y-4;

        & .command {
            @apply bg-[var(--ag-gray-primary)];
            @apply rounded-md;
            @apply overflow-hidden;

            & .command__header {
                @apply relative;
                @apply flex items-center justify-between;
                @apply px-4 py-2;
                @apply bg-[var(--ag-black-primary)];

                & .command__buttons {
                    @apply flex items-center justify-start gap-1;
                    @apply text-[var(--ag-green-primary)];
                }

                & .button {
                    @apply absolute top-2 right-4;
                    @apply flex items-center gap-2;
                    @apply px-1 py-1;
                    @apply text-xs font-bold uppercase tracking-wider;
                    @apply cursor-pointer;

                    &.button--copy {
                        @apply text-[var(--ag-green-primary)];
                        @apply transition-all duration-150;
                        @apply rounded-md;
                        box-sizing: border-box;
                        border: 1px solid transparent;
                        border-bottom: 1px solid white;
                        
                        &:hover {
                            animation: border-rotate 0.6s ease-in-out;
                        }
                    }
                }
            }

            & .command__code {
                @apply relative;
                @apply px-4 py-3;
                @apply min-h-[45px];
                @apply text-sm font-mono text-[var(--ag-green-primary)] break-all;

                &::after {
                    content: '_';
                    @apply absolute;
                    @apply font-mono font-bold text-[var(--ag-white-primary)];
                    @apply opacity-0 transition-opacity duration-300;
                }
            }
        }

        & .button {
            @apply flex items-center gap-2;
            @apply px-6 py-3;
            @apply text-xs font-bold uppercase tracking-wider;
            @apply cursor-pointer;

            &.button--primary {
                @apply bg-[var(--ag-gray-light)];
                @apply text-[var(--ag-green-primary)];
                @apply hover:bg-[var(--ag-gray-lighter)];
            }
        }

        & .instructions {
            @apply space-y-2;
            @apply text-sm text-[var(--ag-white-secondary)];
        }

        & .code {
            @apply px-2 py-1;
            @apply bg-[var(--ag-gray-primary)];
            @apply text-xs font-mono text-[var(--ag-white-primary)];
            @apply [clip-path:var(--clip-path-code)];
        }


        & .config {
            @apply mt-3;
            @apply bg-[var(--ag-gray-primary)];
            @apply rounded-none;
            @apply overflow-hidden;
            @apply shadow-md;
            @apply border border-[var(--ag-gray-light)];

            & .config__header {
                @apply flex items-center justify-between;
                @apply px-3 py-2;
                @apply bg-[var(--ag-black-primary)];
                @apply border-b border-[var(--ag-gray-light)];
            }

            & .config__title {
                @apply text-sm font-normal text-[var(--ag-white-primary)];
                @apply normal-case;
                @apply flex items-center gap-2;
            }

            & .config__title::before {
                content: 'üìù';
                @apply text-xs;
            }

            & .button {
                @apply flex items-center gap-2;
                @apply px-1 py-1;
                @apply text-xs font-bold uppercase tracking-wider;
                @apply cursor-pointer;

                &.button--copy {
                    @apply text-[var(--ag-green-primary)];
                    @apply transition-all duration-150;
                    @apply rounded-md;
                    box-sizing: border-box;
                    border: 1px solid transparent;
                    border-bottom: 1px solid white;
                    
                    &:hover {
                        animation: border-rotate 0.6s ease-in-out;
                    }
                }
            }

            pre {
                @apply p-3;
                @apply text-sm font-mono text-[var(--ag-white-primary)];
                @apply whitespace-pre;
                @apply m-0;
                @apply bg-[var(--ag-gray-primary)];
                @apply leading-normal;
            }

            code {
                @apply text-[var(--ag-white-primary)];
            }
        }
    }

    &:hover .command__code::after {
        @apply opacity-100;
        animation: cursor-blink 0.8s ease-in-out infinite alternate;
    }
}

@keyframes glow-pulse {
    0% {
        text-shadow: 0 0 8px #4a9eff,
                    0 0 16px #4a9eff,
                    0 0 24px #4a9eff,
                    0 0 32px #4a9eff,
                    0 0 48px #4a9eff,
                    0 0 64px #4a9eff;
    }
    100% {
        text-shadow: 0 0 12px #4a9eff,
                    0 0 24px #4a9eff,
                    0 0 36px #4a9eff,
                    0 0 48px #4a9eff,
                    0 0 72px #4a9eff,
                    0 0 96px #4a9eff;
    }
}

@keyframes cursor-blink {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

@keyframes border-rotate {
    0% {
        border-left: 1px solid transparent;
        border-top: 1px solid transparent;
        border-right: 1px solid transparent;
        border-bottom: 1px solid white;
    }
    25% {
        border-left: 1px solid white;
        border-top: 1px solid transparent;
        border-right: 1px solid transparent;
        border-bottom: 1px solid transparent;
    }
    50% {
        border-left: 1px solid transparent;
        border-top: 1px solid white;
        border-right: 1px solid transparent;
        border-bottom: 1px solid transparent;
    }
    75% {
        border-left: 1px solid transparent;
        border-top: 1px solid transparent;
        border-right: 1px solid white;
        border-bottom: 1px solid transparent;
    }
    100% {
        border-left: 1px solid transparent;
        border-top: 1px solid transparent;
        border-right: 1px solid transparent;
        border-bottom: 1px solid white;
    }
}
